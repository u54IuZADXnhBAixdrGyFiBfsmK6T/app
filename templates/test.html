<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Fitness Planner | Gemini</title>
    <!-- Tailwind CSS CDNã‚’èª­ã¿è¾¼ã¿ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --------------------------------------------------------------------------
           ã‚«ã‚¹ã‚¿ãƒ CSSãƒ–ãƒ­ãƒƒã‚¯ (SCSSã®ä»£ã‚ã‚Šã¨ã—ã¦å‡ã£ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å®Ÿç¾)
           -------------------------------------------------------------------------- */

        /* å…¨ä½“è¨­å®š */
        body {
            font-family: "Inter", "Noto Sans JP", sans-serif;
            background-color: #0f172a;
            /* Slate-900ã«è¿‘ã„ãƒ€ãƒ¼ã‚¯èƒŒæ™¯ */
            color: #f1f5f9;
            /* æ˜ã‚‹ã„ãƒ†ã‚­ã‚¹ãƒˆ */
        }

        /* ã‚³ãƒ³ãƒ†ãƒŠã®ã‚·ãƒ£ãƒ‰ã‚¦ã¨èƒŒæ™¯ */
        .container {
            max-width: 900px;
            background-color: #1e293b;
            /* Slate-800 */
            border: 1px solid #334155;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5), 0 0 10px #06b6d4;
            /* å¼·ã‚ã®å½±ã¨ãƒã‚ªãƒ³ãƒ–ãƒ«ãƒ¼ã®ç¸ */
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒã‚ªãƒ³ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .header-glow {
            background: linear-gradient(90deg, #1d4ed8 0%, #06b6d4 100%);
            box-shadow: 0 4px 15px rgba(6, 182, 212, 0.4);
        }

        /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒèª¿æ•´ */
        input[type="number"],
        textarea {
            background-color: #334155;
            /* Slate-700 */
            color: #e2e8f0;
            border: 1px solid #475569;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input[type="number"]:focus,
        textarea:focus {
            border-color: #3b82f6;
            /* Blue-500 */
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
        }

        /* ãƒ—ãƒ©ãƒ³ç”Ÿæˆãƒœã‚¿ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ«ã¨ãƒã‚ªãƒ³åŠ¹æœ */
        .neon-button {
            background-color: #3b82f6;
            transition: all 0.3s ease;
            box-shadow: 0 0 5px #3b82f6, 0 0 15px #3b82f6, 0 0 25px #3b82f6;
        }

        .neon-button:hover:not(:disabled) {
            background-color: #2563eb;
            box-shadow: 0 0 10px #2563eb, 0 0 30px #2563eb, 0 0 50px #2563eb;
            transform: scale(1.02);
        }

        .neon-button:disabled {
            box-shadow: none !important;
        }

        /* å‡ºåŠ›ã‚¨ãƒªã‚¢ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
        #output {
            background-color: #0f172a;
            /* Darker background for output */
            border: 1px solid #334155;
        }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆææ¡ˆéƒ¨åˆ†ï¼‰ */
        #output-content::-webkit-scrollbar {
            width: 8px;
        }

        #output-content::-webkit-scrollbar-thumb {
            background-color: #3b82f6;
            border-radius: 4px;
        }

        #output-content::-webkit-scrollbar-track {
            background-color: #1e293b;
        }

        /* Markdownè¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°å¼·åŒ– */
        #output-content h2 {
            color: #06b6d4;
            /* ã‚·ã‚¢ãƒ³ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ */
            border-bottom-color: #3b82f6 !important;
        }

        #output-content strong {
            color: #10b981;
            /* ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³ã§å¼·èª¿ */
        }

        #output-content .list-disc {
            color: #94a3b8;
            /* ãƒªã‚¹ãƒˆé …ç›®ã®è‰² */
        }
    </style>
</head>

<body class="p-4 sm:p-8 flex justify-center items-start min-h-screen">

    <div class="container w-full rounded-xl shadow-2xl overflow-hidden my-8">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="header-glow p-8 text-white text-center rounded-t-xl">
            <h1 class="text-4xl font-black tracking-wider flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mr-4 text-yellow-300" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M11.3 1.046A1 1 0 0112 2v2.102a4.996 4.996 0 015.4 3.784A1 1 0 0117 8v5a1 1 0 01-.707.957C15.694 15.604 13.432 17 10 17s-5.694-1.396-6.293-2.043A1 1 0 013 13V8a1 1 0 01.3-.784 4.996 4.996 0 015.4-3.784V2a1 1 0 01.7-.954zM10 16a6 6 0 005.196-3H4.804A6 6 0 0010 16z"
                        clip-rule="evenodd" />
                </svg>
                <span class="text-shadow-lg">ULTIMATE AI TRAINER</span>
            </h1>
            <p class="mt-2 text-base opacity-80">ç›®æ¨™é”æˆã®ãŸã‚ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ©ãƒ³ã‚’å³åº§ã«ç”Ÿæˆã€‚</p>
        </header>

        <main class="p-6 sm:p-10">
            <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
            <section class="mb-8 p-6 bg-slate-700 rounded-xl border border-slate-600">
                <h2 class="text-2xl font-bold text-cyan-300 mb-5 border-b-2 border-slate-600 pb-2">ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿å…¥åŠ›</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="height" class="block text-sm font-medium text-slate-300 mb-1">ç¾åœ¨ã®èº«é•· (cm)</label>
                        <input type="number" id="height" value="170" required class="w-full p-3 rounded-lg">
                    </div>
                    <div>
                        <label for="weight" class="block text-sm font-medium text-slate-300 mb-1">ç¾åœ¨ã®ä½“é‡ (kg)</label>
                        <input type="number" id="weight" value="65" required class="w-full p-3 rounded-lg">
                    </div>
                </div>

                <div class="mt-6">
                    <label for="activity"
                        class="block text-sm font-medium text-slate-300 mb-1">æ—¥å¸¸ç”Ÿæ´»ã®éã”ã—æ–¹ï¼ˆä¾‹ï¼šãƒ‡ã‚¹ã‚¯ãƒ¯ãƒ¼ã‚¯ã€é€±3å›ã‚¸ãƒ ï¼‰</label>
                    <textarea id="activity" required class="w-full p-3 rounded-lg h-24 resize-none"
                        placeholder="ãƒ‡ã‚¹ã‚¯ãƒ¯ãƒ¼ã‚¯ä¸­å¿ƒã§ã€é‹å‹•ã¯ã‚ã¾ã‚Šã—ã¦ã„ã¾ã›ã‚“ã€‚"></textarea>
                </div>

                <div class="mt-6">
                    <label for="ideal"
                        class="block text-sm font-medium text-slate-300 mb-1">ç†æƒ³ã®ä½“å‹ãƒ»ç›®æ¨™ï¼ˆä¾‹ï¼šä½“è„‚è‚ªã‚’è½ã¨ã—ãŸã„ã€ç­‹è‚‰ã‚’ã¤ã‘ãŸã„ï¼‰</label>
                    <textarea id="ideal" required class="w-full p-3 rounded-lg h-24 resize-none"
                        placeholder="ç­‹è‚‰ã‚’æ®‹ã—ãªãŒã‚‰ã€è„‚è‚ªã‚’è½ã¨ã—ãŸã„ã§ã™"></textarea>
                </div>

                <button onclick="getRecommendation()" id="submit-button"
                    class="neon-button mt-8 text-white font-bold py-3 px-4 rounded-xl shadow-xl flex items-center justify-center w-full">
                    <span id="button-text">ğŸš€ æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆ (GET STARTED)</span>
                    <div id="loading-spinner"
                        class="hidden animate-spin rounded-full h-5 w-5 border-2 border-t-2 border-white ml-3"></div>
                </button>
            </section>

            <!-- å‡ºåŠ›ã‚¨ãƒªã‚¢ -->
            <section class="mt-8">
                <h2 class="text-2xl font-bold text-cyan-300 mb-5 border-b-2 border-slate-600 pb-2">çµæœ: AIãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ææ¡ˆ</h2>
                <div id="output" class="p-4 sm:p-6 rounded-xl min-h-[150px] overflow-hidden">
                    <p class="text-slate-400 text-center py-8" id="initial-message">
                        å…¨ã¦ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã€ãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <div id="output-content"
                        class="text-slate-200 text-sm overflow-y-auto max-h-[60vh] whitespace-pre-wrap">
                        <!-- Geminiã‹ã‚‰ã®ææ¡ˆãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                </div>
                <p class="text-xs text-slate-500 mt-4 text-center">
                    â€»ã“ã®ææ¡ˆã¯AIã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã¦ãŠã‚Šã€åŒ»ç™‚ã€æ „é¤Šã€ã¾ãŸã¯ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã®å°‚é–€å®¶ã«ã‚ˆã‚‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã«ä»£ã‚ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é–‹å§‹å‰ã«å¿…ãšå°‚é–€å®¶ã«ã”ç›¸è«‡ãã ã•ã„ã€‚</p>
            </section>
        </main>
    </div>

    <script>
        // ----------------------------------------------------------------------------------
        // Gemini APIè¨­å®š (å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯: å¤‰æ›´ãªã—)
        // ----------------------------------------------------------------------------------
        const MODEL_NAME = 'gemini-2.5-flash-preview-09-2025';
        const API_KEY = ""; // Canvasç’°å¢ƒã§è‡ªå‹•çš„ã«æä¾›ã•ã‚Œã¾ã™
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`;

        // ----------------------------------------------------------------------------------
        // UIæ“ä½œ (å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯: å¤‰æ›´ãªã—)
        // ----------------------------------------------------------------------------------
        const outputDiv = document.getElementById('output-content');
        const initialMessage = document.getElementById('initial-message');
        const submitButton = document.getElementById('submit-button');
        const buttonText = document.getElementById('button-text');
        const loadingSpinner = document.getElementById('loading-spinner');

        function setLoadingState(isLoading) {
            submitButton.disabled = isLoading;
            if (isLoading) {
                buttonText.textContent = 'ãƒ—ãƒ©ãƒ³ç”Ÿæˆä¸­...';
                loadingSpinner.classList.remove('hidden');
                submitButton.classList.add('opacity-50', 'cursor-not-allowed');
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã«åˆã‚ã›ã‚‹
                outputDiv.innerHTML = '<p class="text-center p-4 text-cyan-400 font-semibold text-lg">GeminiãŒã‚ãªãŸã®æƒ…å ±ã‚’åˆ†æã—ã€æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ã„ã¾ã™...</p>';
                initialMessage.classList.add('hidden');
            } else {
                buttonText.textContent = 'ğŸš€ æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆ (GET STARTED)';
                loadingSpinner.classList.add('hidden');
                submitButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        // ----------------------------------------------------------------------------------
        // Gemini APIå‘¼ã³å‡ºã—ã¨ãƒ­ã‚¸ãƒƒã‚¯ (å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯: å¤‰æ›´ãªã—)
        // ----------------------------------------------------------------------------------
        async function getRecommendation() {
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;
            const activity = document.getElementById('activity').value;
            const ideal = document.getElementById('ideal').value;

            if (!height || !weight || !activity || !ideal) {
                alertUser('å…¨ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); // ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ä½¿ç”¨
                return;
            }

            setLoadingState(true);

            // APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’æ§‹ç¯‰
            const systemPrompt = "ã‚ãªãŸã¯ãƒ—ãƒ­ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã§ã‚ã‚Šã€æ „é¤Šå£«ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã«åŸºã¥ãã€å®Ÿç¾å¯èƒ½ã§å…·ä½“çš„ãª1é€±é–“ã®çŒ®ç«‹ï¼ˆ3é£Ÿï¼‰ã¨ã€åˆå¿ƒè€…ã§ã‚‚å§‹ã‚ã‚„ã™ã„1é€±é–“ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒ³ï¼ˆé‹å‹•æ™‚é–“ã¨ç¨®é¡ï¼‰ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚ææ¡ˆã¯Markdownå½¢å¼ã§æ•´å½¢ã—ã€ä»¥ä¸‹ã®2ã¤ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ§‹æˆã—ã¦ãã ã•ã„: 1. çŒ®ç«‹ãƒ—ãƒ©ãƒ³, 2. ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒ³. ææ¡ˆã®å†’é ­ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®BMIã«åŸºã¥ã„ãŸç¾åœ¨ã®ä½“å‹è©•ä¾¡ã¨ã€ç›®æ¨™é”æˆã®ãŸã‚ã®ã‚«ãƒ­ãƒªãƒ¼ç›®å®‰ã‚‚ç¤ºã—ã¦ãã ã•ã„ã€‚";
            const userQuery = `ä»¥ä¸‹ã®æƒ…å ±ã«åŸºã¥ã„ã¦ã€ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã¨ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®ææ¡ˆã‚’ã—ã¦ãã ã•ã„ã€‚
- èº«é•·: ${height}cm
- ä½“é‡: ${weight}kg
- æ—¥å¸¸ç”Ÿæ´»: ${activity}
- ç†æƒ³ã®ä½“å‹ãƒ»ç›®æ¨™: ${ideal}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            // æŒ‡æ•°é–¢æ•°çš„ãƒãƒƒã‚¯ã‚ªãƒ•ã®å®Ÿè£…
            const MAX_RETRIES = 5;
            let lastError = null;

            for (let attempt = 0; attempt < MAX_RETRIES; attempt++) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.status === 429 && attempt < MAX_RETRIES - 1) {
                        // 429 Too Many Requests ã®å ´åˆã¯ãƒªãƒˆãƒ©ã‚¤
                        const delay = Math.pow(2, attempt) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }

                    const result = await response.json();

                    if (response.ok) {
                        const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                        if (generatedText) {
                            // æˆåŠŸã—ãŸå ´åˆã€Geminiã®å›ç­”ã‚’Markdownã¨ã—ã¦è¡¨ç¤º
                            outputDiv.innerHTML = formatMarkdownToHtml(generatedText);
                            outputDiv.scrollTop = 0; // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ä¸€ç•ªä¸Šã«æˆ»ã™
                            setLoadingState(false);
                            return;
                        } else {
                            throw new Error("AIã‹ã‚‰ã®å¿œç­”ãŒç©ºã§ã—ãŸã€‚");
                        }
                    } else {
                        // ãã®ä»–ã®APIã‚¨ãƒ©ãƒ¼
                        const errorMessage = result.error?.message || JSON.stringify(result);
                        throw new Error(`APIã‚¨ãƒ©ãƒ¼ (${response.status}): ${errorMessage}`);
                    }
                } catch (error) {
                    console.error(`Fetch Error (Attempt ${attempt + 1}):`, error);
                    lastError = error;
                    if (attempt === MAX_RETRIES - 1) {
                        // æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ã«é”ã—ãŸå ´åˆ
                        alertUser(`ãƒ—ãƒ©ãƒ³ã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${lastError.message}`);
                        setLoadingState(false);
                        return;
                    }
                    // ãƒªãƒˆãƒ©ã‚¤ã®ãŸã‚ã®å¾…æ©Ÿ
                    const delay = Math.pow(2, attempt) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        // ----------------------------------------------------------------------------------
        // ç°¡æ˜“Markdown to HTMLå¤‰æ› (Markdownã®æ•´å½¢çµæœã‚’ãã®ã¾ã¾è¡¨ç¤ºã™ã‚‹ãŸã‚)
        // ----------------------------------------------------------------------------------
        function formatMarkdownToHtml(markdownText) {
            let html = markdownText;

            // è¦‹å‡ºã—ã®å¤‰æ›
            html = html.replace(/^### (.*$)/gim, '<h3 class="text-lg font-bold mt-4 mb-2 text-blue-400">$1</h3>');
            html = html.replace(/^## (.*$)/gim, '<h2 class="text-xl font-bold mt-6 mb-3 text-cyan-300 border-b border-cyan-500 pb-1">$1</h2>');
            html = html.replace(/^# (.*$)/gim, '<h1 class="text-2xl font-extrabold mt-8 mb-4 text-cyan-200">$1</h1>');

            // å¼·èª¿ã®å¤‰æ›
            html = html.replace(/\*\*(.*?)\*\*/gim, '<strong class="font-semibold text-emerald-400">$1</strong>');
            html = html.replace(/\*(.*?)\*/gim, '<i>$1</i>');

            // ãƒªã‚¹ãƒˆï¼ˆé †åºãªã—ï¼‰ã®å¤‰æ› (æ”¹è¡Œã¨ãƒã‚¤ãƒ•ãƒ³ã‚’ãƒªã‚¹ãƒˆé …ç›®ã«)
            html = html.replace(/^\s*-\s+(.*$)/gim, '<li class="ml-4 list-disc text-sm">$1</li>');
            // ãƒªã‚¹ãƒˆã®å§‹ã¾ã‚Šã¨çµ‚ã‚ã‚Šã‚’ulã‚¿ã‚°ã§å›²ã‚€ (è¤‡é›‘ãªå®Ÿè£…ã‚’é¿ã‘ã‚‹ãŸã‚ç°¡æ˜“çš„ã«)
            html = html.replace(/(<li.*?>[\s\S]*?<\/li>)/g, '<ul class="mb-3 pl-4">$1</ul>');

            // æ®µè½ã®å¤‰æ›ï¼ˆãŸã ã—ã€ã™ã§ã«Hã‚¿ã‚°ã‚„ãƒªã‚¹ãƒˆã«ãªã£ã¦ã„ã‚‹è¡Œã¯é™¤ãï¼‰
            html = html.replace(/^(?!<h|<ul|<li)(.*$)/gim, '<p class="mb-3 text-sm">$1</p>');

            // é€£ç¶šã™ã‚‹æ”¹è¡Œã‚’ä¸€ã¤ã«ã¾ã¨ã‚ã‚‹ (ãƒ†ã‚­ã‚¹ãƒˆã®æ•´å½¢ã®ãŸã‚)
            html = html.replace(/\n\n/g, '<br><br>');
            html = html.replace(/\n/g, '<br>');
            html = html.replace(/<br><br>/g, '</p><p class="mb-3 text-sm">');
            html = html.replace(/<br>/g, '<br class="my-1"/>');

            // å†—é•·ãªpã‚¿ã‚°ã‚’å‰Šé™¤
            html = html.replace(/<p class="mb-3 text-sm"><\/p>/g, '');


            return `<div class="p-2 text-slate-200">${html}</div>`;
        }

        // ----------------------------------------------------------------------------------
        // ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½ (alert()ã®ä»£ã‚ã‚Šã«ç°¡æ˜“ãƒ¢ãƒ¼ãƒ€ãƒ«é¢¨è¡¨ç¤º)
        // ----------------------------------------------------------------------------------
        function alertUser(message) {
            outputDiv.innerHTML = `<div class="p-6 bg-red-900 text-red-300 rounded-lg border border-red-700">
                <h3 class="font-bold mb-2">ğŸš¨ ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯è­¦å‘Š</h3>
                <p>${message}</p>
            </div>`;
            initialMessage.classList.add('hidden');
            setLoadingState(false);
        }

        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ­ãƒ¼ãƒ‰æ™‚ã«åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        document.addEventListener('DOMContentLoaded', () => {
            outputDiv.innerHTML = '';
            initialMessage.classList.remove('hidden');
        });

    </script>
</body>

</html>